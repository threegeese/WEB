# 网络基础

## OSI七层模型

> 开放式系统互联通信参考模型（Open System Interconnection Reference Model，缩写为 OSI），一种概念模型，由国际标准化组织提出，一个试图使各种计算机在世界范围内互连为网络的标准框架。

- 层次划分
    - 第7层 应用层
    - 第6层 表达层
    - 第5层 会话层
    - 第4层 传输层
    - 第3层 网络层
    - 第2层 数据链路层
    - 第1层 物理层

## TCP/IP四层模型

- TCP/IP：TCP/IP不是一个协议，而是一个协议族的统称。这些协议包括：
    - TCP、IP、UDP、FTP、HTTP、DNS、IEEE 802.3、ICMP等
    
TCP/IP协议族里最重要的一点就是分层。按层次分别为以下4层：**应用层、传输层、网络层和数据链路层**。
- 应用层：决定了向用户提供应用服务时通信的活动。
    - FTP：File Transfer Protocol，文件传输协议
    - DNS：Domain Name System，域名系统
    - HTTP
- 传输层：对上层应用层，提供处于网络连接中的两台计算机之间的数据传输。
    - TCP：Transmission Control Protocol，传输控制协议
    - UDP：User Data Protocol，用户数据报协议
- 网络层(又称网络互连层)：用来处理在网络上流动的数据包。数据包是网络传输的最小数据单位。
    - 该层规定了通过怎样的路径(传输路线)到达对方计算机，并把数据包传送给对方。
- 数据链路层：用来处理连接网络的硬件部分。
    - 操作系统、硬件的设备驱动、网卡(NIC)、光纤等。

### TCP三次握手

三次握手(Three-way Handshake)，是指建立一个TCP连接时，需要客户端和服务器总共发送3个包。
三次握手的目的是连接服务器指定端口，建立TCP连接,并同步连接双方的序列号和确认号并交换 TCP 窗口大小信息.

1. 第一次握手：建立连接时，客户端A发送SYN包(SYN=j)到服务器B，并进入SYN_SEND状态，等待服务器B确认。
2. 第二次握手：服务器B收到SYN包，必须确认客户A的SYN(ACK=j+1)，同时自己也发送一个SYN包(SYN=k)，即SYN+ACK包，此时服务器B进入SYN_RECV状态。
3. 第三次握手：客户端A收到服务器B的SYN＋ACK包，向服务器B发送确认包ACK(ACK=k+1)，此包发送完毕，客户端A和服务器B进入ESTABLISHED状态，完成三次握手。
4. 完成三次握手，客户端与服务器开始传送数据。

### TCP四次挥手

1. 客户端A发送一个FIN，用来关闭客户A到服务器B的数据传送。
2. 服务器B收到这个FIN，它发回一个ACK，确认序号为收到的序号加1。和SYN一样，一个FIN将占用一个序号。
3. 服务器B关闭与客户端A的连接，发送一个FIN给客户端A。
4. 客户端A发回ACK报文确认，并将确认序号设置为收到序号加1。
5. TCP采用四次挥手关闭连接
